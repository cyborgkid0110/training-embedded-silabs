
# SLC Specification

Silicon Labs Configurator (SLC) is a metadata specification for Silicon Labs SDKs, and it also describes methods for creating and configuring embedded software projects for Silicon Labs IoT devices. 

SDKs are built from components that describe units of code (files, definitions, etc.), and dependencies between components are described using feature strings. Projects use specific components to create an executable binary, and during project generation, a dependency resolver checks and resolves these dependencies.

Projects may also use components from SDK Extensions, which are collections of components that extend specific SDKs. When an SLC project is generated, an IDE project is created.

Components can contribute configuration headers, allowing the project to be reconfigured without regenerating the IDE project. This reduces disruption and facilitates short feedback loops when making changes. The project generation process also produces autogenerated files based on component selections, with some components contributing Jinja template files and others providing content for those templates.

## How projects are generated

The SLC project description file (.slcp) defines a single software application, which can be used to generate an IDE project for building the application. The .slcp file marks the root directory of the project, and all paths are resolved from there.

### Steps of Project Generation Process:

- **Start with the .slcp File**: The project is defined by a .slcp file, which remains read-only during the initial project generation.

- **New Project Transformation**: When creating a project from example applications, the .slcp file is rewritten to remove conditional content, customize the project, and record the SDK used. Post-build profiles are transformed into project-specific scripts.

- **Dependency Resolution**: The unresolved project, containing only direct dependencies, undergoes dependency resolution. All necessary components are resolved and installed. Components are consists of source files and headers. Component instances or config files may be added in this time.

- **Project Conversion for IDE**: Once dependencies are resolved, the project is converted into a format specific to the target IDE.

- **Output Directory Setup**: By default, the project is generated in the project root directory, but custom directories can be set. Configuration and autogenerated files are placed in designated subdirectories.

- **Project Storage**: It is recommended to store separate projects in different directories to avoid conflicts. Simplicity Studio generates the project in the same directory as the .slcp file, while SLC-CLI allows custom generation directories.

## SDK extension
The SDK extension is a collection of components and other items, such as example projects based on the parent SDK, which must be installed first. SDK extensions is useful for containing customer-created components and other items to be maintained separately from the Silicon Labs SDK.

### How to create SDK extension
The .slce file is used to add SDK extension to parent SDK. Here is a basic .slce example:

```
# third_party_hw_drivers.slce

id: third_party_hw_drivers
label: Third Party Hardware Drivers
description: >
  Third Party Hardware Driver extension for the Gecko and Wiseconnect SDKs.
version: 3.0.0
sdk:
  id: gecko_sdk
  version: 4.4.3
component_path:
  - path: "driver/component/drivers/mikroe"
  - path: "driver/component/drivers/silabs"
  - path: "driver/component/services"
```

`id`: the **unique** name of the SDK extension.\
`label`: name for the SDK extension.\
`description`: provide content about SDK extension.\
`version`: version number of the SDK extension.\
`sdk`: refer to the exact SDK and version the extension is designed for.\
`component_path`: list directories in which the tool should look for component files. Destination folder of each path must include .slcc (SLC Component) file.

To link custom projects to SDK extensions, the .slsdk file is used. Here is a basic .slsdk file:

```
# third_party_hw_drivers.slsdk
# Properties file for Simplicity Studio metadata
id=uc.extension.third_party_hw_drivers

version=3.0.0

label=Third Party Hardware Drivers
description=Third Party Hardware Drivers

prop.file.templatesFile=templates.xml
prop.subLabel=Third\\ Party\\ Hardware\\ Drivers\\ 3.0.0
```
XML file is used to create IDE projects from sample projects. The attribute `prop.file.templatesFile` should be path direction to XML file.

## How to add components to SDK extension
The .slcc file describes a single SLC component, with references to the different files that make up the component. Here is a example of custom .slcc file:

```
# unity.slcc

package: training_ds_silabs
description: Unit test framework unity
label: UNITY FRAMEWORK UNIT TEST
quality: production
id: unity
category: UNIT TEST
provides:
  - name: "unity"
include:
  - path: ./third_party/Unity/src/
    file_list:
      - path: unity_internals.h
      - path: unity.h
  - path: ./src/unit_test/inc/
    file_list:
      - path: unit_test.h
source:
  - path: ./third_party/Unity/src/unity.c
  - path: ./src/unit_test/src/unit_test.c
ui_hints:
  visibility: never
```

`package`: describe which SDK package the component should be part of.\
`quality`: quality level of the component. The following quality levels are available: `production`, `evaluation`, `experimental`, `deprecated`, `internal`.\
`category`:  category to assist with discovery and classification.\
`include`: List of paths and the files contained within that shall be referenced as include paths in the exported IDE project.\
`source`: List of files that shall be referenced as source files in the exported IDE project.\
`ui_hints`: Hints to GUI tooling to assist in rendering the component. The `visibility` attribute has 3 options: `advance`,`basic`,`never`.

Some components may include config files and are able to create instances and their config, such as Button, LED, e.t.c... Here is example .slcc file of Simple LED component:

```
... other attribute

root_path: platform/driver/leddrv/
instantiable:
  prefix: inst
config_file:
  - path: "config/sl_simple_led_{{instance}}_config.h"
    file_id: simple_led_config
provides:
  - name: simple_led
    allow_multiple: true
requires:
  - name: simple_led_core
template_contribution:
  - name: simple_led_instance
    value: "{{instance}}"
  - name: component_catalog
    value: "{{instance}}"
  - name: component_catalog
    value: simple_led
  - name: component_catalog
    value: "simple_led_{{instance}}"
```

More info: [SLC Component](https://siliconlabs.github.io/slc-specification/1.2/format/component/)

## How to add projects to SDK extension

There are 2 types of file is used to create custom project: `.slcp` file for describing SLC project, and `.xml` file for linking project to SDK extension and create project when using
Simplicity Studio.

Here is a sample `.slcp` file:
```
project_name: blink_led_example
label: blink_led_example
description: >
  This project shows how to add blink LED example project to sdk.
category: Example|Blink LEDs example
package: training_ds_silabs
quality: production

source:
- {path: app.c}
- {path: main.c}
- {path: blink.c}

include:
- path: ./
  file_list:
  - {path: app.h}
  - {path: blink.h}
sdk: {id: gecko_sdk, version: 4.4.2}

sdk_extension:
  - {id: training_ds_silabs, version: 1.0.0}

component:
- {id: device_init}
- instance: [led0, led1]
  id: simple_led
- {id: sl_system}
- {id: sleeptimer}
- {id: double_linked_list, from: training_ds_silabs}

configuration:
- {name: SL_SIMPLE_LED_LED0_POLARITY, value: "SL_SIMPLE_LED_POLARITY_ACTIVE_HIGH"}
- {name: SL_SIMPLE_LED_LED1_POLARITY, value: "SL_SIMPLE_LED_POLARITY_ACTIVE_HIGH"}
- {name: SL_SIMPLE_LED_LED0_PORT, value: "gpioPortB"}
- {name: SL_SIMPLE_LED_LED1_PORT, value: "gpioPortB"}
- {name: SL_SIMPLE_LED_LED0_PIN, value: "0"}
- {name: SL_SIMPLE_LED_LED1_PIN, value: "1"}

```
The project description should include all dependencies component and refer to SDK and SDK extension used. The `configuration` attribute is used to configure settings in the projects.

A single XML file can link multiple projects to SDK extension.
Here is a simple example of XML file: 

```
<?xml version="1.0" encoding="ASCII"?>
<model:MDescriptors xmlns:model="http://www.silabs.com/ss/Studio.ecore">
  <descriptors name="dynamic_allocate_function" label="Dynamic Allocate Function" description="This is a assignment on week 1 require dynamic allocate pointer through function&#xA;">
    <properties key="namespace" value="template.uc"/>
    <properties key="keywords" value="universal\ configurator"/>
    <properties key="projectFilePaths" value="assignment/week1/dynamic_allocate_function/dynamic_allocate_function.slcp"/>
    <properties key="boardCompatibility" value="com.silabs.board.none brd2601a brd2601b brd2703a brd2704a brd4158a brd4159a brd4161a brd4162a brd4163a brd4164a brd4165b brd4166a brd4166c brd4167a brd4168a brd4170a brd4171a brd4172a brd4172b brd4173a brd4174a brd4174b brd4175a brd4176a brd4179b brd4180a brd4180b brd4181a brd4181b brd4181c brd4182a brd4186a brd4186b brd4186c brd4187a brd4187b brd4187c brd4188a brd4188b brd4190a brd4194a brd4195a brd4195b brd4196a brd4196b brd4197a brd4198a brd4198b brd4199b brd4304a brd4305d brd4305e brd4306c brd4306d brd4308a brd4308b brd4308c brd4308d brd4309a brd4309b brd4311b brd4316a brd4317a brd4318a brd4319a brd4329a brd4337a brd4406a brd4411a"/>
    <properties key="partCompatibility" value=".*efr32mg1[23]p.* .*efr32mg2[1247].* .*mgm1[23].* .*mgm2[124].* .*rm21."/>
    <properties key="ideCompatibility" value="generic-template iar-embedded-workbench makefile-ide simplicity-ide visual-studio-code"/>
    <properties key="toolchainCompatibility" value="gcc iar segger"/>
    <properties key="category" value="Dynamic Allocate Function"/>
    <properties key="quality" value="training_ds_silabs"/>
    <properties key="stockConfigCompatibility" value="com.silabs.ss.framework.project.toolchain.core.default"/>
    <properties key="filters" value="Assingment\week1"/>
  </descriptors>
  ...
</model:MDescriptors>
```
The `<descriptor>` has 3 main properties: name, label and description. These properties should be unique.
The `projectFilePaths` path directory include path directory to `.slcp` file.

## Add SLC extension to SS5
Instruction here: [Install SLC extension](https://docs.silabs.com/simplicity-studio-5-users-guide/latest/ss-5-users-guide-getting-started/install-sdk-extensions)

